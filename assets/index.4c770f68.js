var M=Object.defineProperty,L=Object.defineProperties;var O=Object.getOwnPropertyDescriptors;var N=Object.getOwnPropertySymbols;var R=Object.prototype.hasOwnProperty,P=Object.prototype.propertyIsEnumerable;var x=(n,a,r)=>a in n?M(n,a,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[a]=r,p=(n,a)=>{for(var r in a||(a={}))R.call(a,r)&&x(n,r,a[r]);if(N)for(var r of N(a))P.call(a,r)&&x(n,r,a[r]);return n},v=(n,a)=>L(n,O(a));import{R as t,j as l,L as f,O as _,r as d,N as $,u as C,a as X,b as c,c as w,d as A,B}from"./vendor.8eeac0f8.js";const q=function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))e(o);new MutationObserver(o=>{for(const m of o)if(m.type==="childList")for(const g of m.addedNodes)g.tagName==="LINK"&&g.rel==="modulepreload"&&e(g)}).observe(document,{childList:!0,subtree:!0});function r(o){const m={};return o.integrity&&(m.integrity=o.integrity),o.referrerpolicy&&(m.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?m.credentials="include":o.crossorigin==="anonymous"?m.credentials="omit":m.credentials="same-origin",m}function e(o){if(o.ep)return;o.ep=!0;const m=r(o);fetch(o.href,m)}};q();function z(n={}){const{wrapper:a}=n.components||{};return a?t.createElement(a,n,t.createElement(r)):r();function r(){const e=Object.assign({blockquote:"blockquote",p:"p",a:"a",h2:"h2",ol:"ol",li:"li",ul:"ul",code:"code",h3:"h3"},n.components);return t.createElement(t.Fragment,null,t.createElement(e.blockquote,null,`
`,t.createElement(e.p,null,"Check out ",t.createElement(e.a,{href:"https://github.com/tianwenh/tianwenh.github.io"},"github")," for source code."),`
`),`
`,t.createElement(e.p,null,"Instead of learning all the exsiting static site generators, I decided to start 2022 by building my own."),`
`,t.createElement(e.h2,{id:"whats-the-option"},t.createElement(e.a,{className:"header-anchor",href:"#whats-the-option"},"#"),"What's the option?"),`
`,t.createElement(e.p,null,"There are several options having your own blog:"),`
`,t.createElement(e.ol,{start:"0"},`
`,t.createElement(e.li,null,"Write your own SSG;"),`
`,t.createElement(e.li,null,"Use existing SSG(static site generator) + theme;"),`
`,t.createElement(e.li,null,"Use existing SSG + writing custom theme;"),`
`),`
`,t.createElement(e.p,null,"The time needed for learning/hacking existing theme and SSG is probably similar to writing your own. Even if not, knowing all the details in the beginning probably will compensate the costs later on."),`
`,t.createElement(e.h2,{id:"static-site-generator-breakdown"},t.createElement(e.a,{className:"header-anchor",href:"#static-site-generator-breakdown"},"#"),"Static site generator breakdown"),`
`,t.createElement(e.p,null,"Break down features that I need:"),`
`,t.createElement(e.ul,null,`
`,t.createElement(e.li,null,"Light weight dev experience;"),`
`,t.createElement(e.li,null,"MDX and customization;"),`
`,t.createElement(e.li,null,"Frontmatter;"),`
`,t.createElement(e.li,null,"SSR;"),`
`,t.createElement(e.li,null,"Deploy automation;"),`
`,t.createElement(e.li,null,"Dark mode;"),`
`,t.createElement(e.li,null,"Custom theming;"),`
`),`
`,t.createElement(e.h2,{id:"lightweight-dev-experience"},t.createElement(e.a,{className:"header-anchor",href:"#lightweight-dev-experience"},"#"),"Lightweight dev experience"),`
`,t.createElement(e.p,null,"I am not working a billion dollar project. ",t.createElement(e.a,{href:"https://vitejs.dev/"},"Vite")," comes in handy for what I expectes. Fast load, SSR support, extensible, reasonable default setups, etc."),`
`,t.createElement(e.p,null,"Starting the project with its official ",t.createElement(e.a,{href:"https://vitejs.dev/guide/#trying-vite-online"},"react-ts template"),", just a few clicks, website is up running."),`
`,t.createElement(e.p,null,"Other general step up (eslint, prettier) are omitted here, but you can find resources online or copy my template."),`
`,t.createElement(e.h2,{id:"mdx-and-customization"},t.createElement(e.a,{className:"header-anchor",href:"#mdx-and-customization"},"#"),"MDX and customization"),`
`,t.createElement(e.p,null,"The next big piece is MDX support. Mostly, follow ",t.createElement(e.a,{href:"https://mdxjs.com/"},"mdxjs")," tutorial."),`
`,t.createElement(e.p,null,"Once MDX plugin is install, it is time for more MDX plugins:"),`
`,t.createElement(e.ul,null,`
`,t.createElement(e.li,null,t.createElement(e.code,null,"remark-gfm")," for better markdown rendering;"),`
`,t.createElement(e.li,null,t.createElement(e.code,null,"rehype-slug")," for extracting frontmatter;"),`
`,t.createElement(e.li,null,t.createElement(e.code,null,"remark-math"),", ",t.createElement(e.code,null,"rehype-katex")," for math latex rendering;"),`
`,t.createElement(e.li,null,t.createElement(e.code,null,"mdx-prism")," for code highlighting and line highlighting;"),`
`,t.createElement(e.li,null,t.createElement(e.code,null,"rehype-slug"),", ",t.createElement(e.code,null,"rehype-autolink-headings")," for linkify headings;"),`
`),`
`,t.createElement(e.p,null,"Just follow github repo tutoirals, install and add to ",t.createElement(e.code,null,"vite.config.ts"),"."),`
`,t.createElement(e.h3,{id:"music-notation"},t.createElement(e.a,{className:"header-anchor",href:"#music-notation"},"#"),"Music notation"),`
`,t.createElement(e.p,null,"For music notation rendering, I ended up with building ",t.createElement(e.code,null,"Vexflow")," React components and calling them from mdx. Considered ",t.createElement(e.code,null,"lilypond"),", it seems to be too heavy for my usage."),`
`,t.createElement(e.h3,{id:"override-mdx-component-rendering"},t.createElement(e.a,{className:"header-anchor",href:"#override-mdx-component-rendering"},"#"),"Override MDX component rendering"),`
`,t.createElement(e.p,null,"I also implemented my own ",t.createElement(e.code,null,"MdxLink")," so that"),`
`,t.createElement(e.ul,null,`
`,t.createElement(e.li,null,"Links always jump to new pages;"),`
`,t.createElement(e.li,null,"Extensions are dropped for correct deeplink routing;"),`
`),`
`,t.createElement(e.h2,{id:"frontmatter"},t.createElement(e.a,{className:"header-anchor",href:"#frontmatter"},"#"),"Frontmatter"),`
`,t.createElement(e.p,null,"Frontmatter is metadata for each posts. There are 4 main properties I use:"),`
`,t.createElement(e.ul,null,`
`,t.createElement(e.li,null,"title: UUID for each post;"),`
`,t.createElement(e.li,null,"date;"),`
`,t.createElement(e.li,null,"subtitle: a sneak peek of post;"),`
`,t.createElement(e.li,null,"tags: used for grouping posts;"),`
`),`
`,t.createElement(e.p,null,"This is a pretty standard way of organizing blog posts."),`
`,t.createElement(e.h2,{id:"grab-pages"},t.createElement(e.a,{className:"header-anchor",href:"#grab-pages"},"#"),"Grab pages"),`
`,t.createElement(e.p,null,"SSG is pages(similar to config) driven. frontmatter, Pages are essentailly md/mdx files."),`
`,t.createElement(e.p,null,"I wrote a ",t.createElement(e.code,null,"pages")," plugin for vite, so that it auto grabs pages(config) from certain folders, parse then rendering them in my custom theme."),`
`,t.createElement(e.p,null,"Higher level, it works this way:"),`
`,t.createElement(e.ol,null,`
`,t.createElement(e.li,null,t.createElement(e.code,null,"pages")," folder serves all static md/mdx files;"),`
`,t.createElement(e.li,null,t.createElement(e.code,null,"pages")," plugin grabs these file, transform and group them into ",t.createElement(e.code,null,"@pages"),";"),`
`,t.createElement(e.li,null,"Theme TS files import metadata from ",t.createElement(e.code,null,"@pages"),";"),`
`,t.createElement(e.li,null,"Rendering each static file as a post, metadata as list of posts;"),`
`),`
`,t.createElement(e.h2,{id:"custom-theming"},t.createElement(e.a,{className:"header-anchor",href:"#custom-theming"},"#"),"Custom theming"),`
`,t.createElement(e.p,null,"My theme is pretty minimal. I took design inspiration from ",t.createElement(e.a,{href:"https://overreacted.io"},"overreacted.io"),". Just tweak around css to make it not ugly..."),`
`,t.createElement(e.p,null,"I also made dark mode. It auto detects user preference, and persists user setup in local storage."),`
`,t.createElement(e.h2,{id:"ssr"},t.createElement(e.a,{className:"header-anchor",href:"#ssr"},"#"),"SSR"),`
`,t.createElement(e.p,null,"To begin, follow vite SSR tutoirals.I did some modification to fit in my use case."),`
`,t.createElement(e.h2,{id:"deploy-automation"},t.createElement(e.a,{className:"header-anchor",href:"#deploy-automation"},"#"),"Deploy automation"),`
`,t.createElement(e.p,null,"For deployment, ",t.createElement(e.code,null,"gh-pages")," is used for manual push. I also created a github action that auto build and deploy the latest push on ",t.createElement(e.code,null,"main"),"."),`
`,t.createElement(e.h2,{id:"how-to-use"},t.createElement(e.a,{className:"header-anchor",href:"#how-to-use"},"#"),"How to use"),`
`,t.createElement(e.p,null,"Read project ",t.createElement(e.a,{href:"https://github.com/tianwenh/tianwenh.github.io"},"README")," for detailed instructions."),`
`,t.createElement(e.p,null,"For writing posts, just add new pages, and ",t.createElement(e.code,null,"git push"),"."),`
`,t.createElement(e.h2,{id:"future-plans"},t.createElement(e.a,{className:"header-anchor",href:"#future-plans"},"#"),"Future plans"),`
`,t.createElement(e.p,null,"I plan to make it into a package, so that I can use it for multiple purposes:"),`
`,t.createElement(e.ul,null,`
`,t.createElement(e.li,null,"Serving docs for projects;"),`
`,t.createElement(e.li,null,"Jupyter Notebook-ish interactive playground for personal code study;"),`
`,t.createElement(e.li,null,"Foam/roam research-ish rendering;"),`
`),`
`,t.createElement(e.h2,{id:"conclusion"},t.createElement(e.a,{className:"header-anchor",href:"#conclusion"},"#"),"Conclusion"),`
`,t.createElement(e.p,null,"I said it easy, it in fact does require a week to build up a plan, research best practices, tweak around css/js, and debugging."),`
`,t.createElement(e.p,null,"Finally, ",t.createElement(e.a,{href:"https://github.com/tianwenh/tianwenh.github.io"},"code is here"),"."))}}var G=[{component:z,filepath:"/home/runner/work/tianwenh.github.io/tianwenh.github.io/pages/how-this-blog-is-built/index.md",slug:"how-this-blog-is-built",frontmatter:{title:"How this blog is built",date:"2022-01-08T00:00:00.000Z",subtitle:"Yet another static site generator built in 2022.",tags:[],only:!1,hide:!1}}];function j(n){return n.toLowerCase().trim().replace(/[^\w\s-]/g,"-").replace(/[\s_-]+/g,"-").replace(/^-+|-+$/g,"")}function H(n){return Object.entries(n).filter(([,r])=>r).map(([r])=>r).join(" ")}const U=()=>{var r;const n=window.matchMedia("(prefers-color-scheme: dark)"),a=(r=D())!=null?r:n.matches?"dark":"light";y(a),requestAnimationFrame(()=>{document.body.style.transition="color 0.5s ease-out, background 0.5s ease-out"})},D=()=>localStorage.getItem("theme"),y=n=>{n==="dark"?document.documentElement.className="dark":document.documentElement.className="",localStorage.setItem("theme",n)},b=G.sort((n,a)=>new Date(a.frontmatter.date).getTime()-new Date(n.frontmatter.date).getTime()),k=b.reduce((n,a)=>(a.frontmatter.tags.forEach(r=>{var e;n[r]=[...(e=n[r])!=null?e:[],a]}),n),{}),J=Object.entries(k).reduce((n,[a,r])=>{var o;const e=j(a);return n[e]=[...(o=n[e])!=null?o:[],...r],n},{}),W=Object.keys(k);var u="/home/runner/work/tianwenh.github.io/tianwenh.github.io/theme/Layout.tsx";const K=()=>l.exports.jsxDEV("div",{className:"layout-container",children:[l.exports.jsxDEV("header",{className:"layout-head",children:l.exports.jsxDEV("h3",{children:[l.exports.jsxDEV(f,{to:"/",children:"HTW"},void 0,!1,{fileName:u,lineNumber:11,columnNumber:11},globalThis),l.exports.jsxDEV(Y,{},void 0,!1,{fileName:u,lineNumber:12,columnNumber:11},globalThis)]},void 0,!0,{fileName:u,lineNumber:10,columnNumber:9},globalThis)},void 0,!1,{fileName:u,lineNumber:9,columnNumber:7},globalThis),l.exports.jsxDEV("main",{children:l.exports.jsxDEV(_,{},void 0,!1,{fileName:u,lineNumber:16,columnNumber:9},globalThis)},void 0,!1,{fileName:u,lineNumber:15,columnNumber:7},globalThis)]},void 0,!0,{fileName:u,lineNumber:8,columnNumber:5},globalThis);function Q(){return typeof window=="undefined"?!1:D()==="dark"}const Y=()=>{const n=e=>e?"dark":"light",[a,r]=d.exports.useState(Q());return d.exports.useEffect(()=>{y(n(a))},[a]),l.exports.jsxDEV("span",{className:"dark-toggle",onClick:()=>r(!a),children:a?"\u{1F318}":"\u{1F314}"},void 0,!1,{fileName:u,lineNumber:38,columnNumber:5},globalThis)};var Z="/home/runner/work/tianwenh.github.io/tianwenh.github.io/theme/Tag.tsx";const T=n=>{const a=j(n.tag);return l.exports.jsxDEV($,{to:`/tags/${a}`,className:({isActive:r})=>{var e;return H({[(e=n.className)!=null?e:""]:!0,"tag-active":r})},children:["#",n.tag]},void 0,!0,{fileName:Z,lineNumber:15,columnNumber:5},globalThis)};var i="/home/runner/work/tianwenh.github.io/tianwenh.github.io/theme/Page.tsx";const V=n=>{const a=new Date(n.page.frontmatter.date).toLocaleDateString();return l.exports.jsxDEV(l.exports.Fragment,{children:[l.exports.jsxDEV("h2",{className:"page-title",children:l.exports.jsxDEV(f,{to:`/${n.page.slug}`,children:n.page.frontmatter.title},void 0,!1,{fileName:i,lineNumber:16,columnNumber:9},globalThis)},void 0,!1,{fileName:i,lineNumber:15,columnNumber:7},globalThis),l.exports.jsxDEV("p",{className:"page-subtitle",children:n.page.frontmatter.subtitle},void 0,!1,{fileName:i,lineNumber:18,columnNumber:7},globalThis),l.exports.jsxDEV("small",{children:[l.exports.jsxDEV("time",{dateTime:a,className:"page-info",children:a},void 0,!1,{fileName:i,lineNumber:20,columnNumber:9},globalThis),n.page.frontmatter.tags.map(r=>l.exports.jsxDEV(T,{tag:r,className:"page-info"},r,!1,{fileName:i,lineNumber:24,columnNumber:18},globalThis))]},void 0,!0,{fileName:i,lineNumber:19,columnNumber:7},globalThis)]},void 0,!0)},ee=n=>{if(/^https?:\/\//.test(n.href))return l.exports.jsxDEV("a",p({target:"_blank"},n),void 0,!1,{fileName:i,lineNumber:34,columnNumber:12},globalThis);const r=n.href.replace(/\.mdx?/,"");return l.exports.jsxDEV(f,v(p({},n),{to:r}),void 0,!1,{fileName:i,lineNumber:37,columnNumber:10},globalThis)},te={a:ee},ne=n=>l.exports.jsxDEV(l.exports.Fragment,{children:[l.exports.jsxDEV("header",{children:l.exports.jsxDEV(V,{page:n.page},void 0,!1,{fileName:i,lineNumber:48,columnNumber:9},globalThis)},void 0,!1,{fileName:i,lineNumber:47,columnNumber:7},globalThis),l.exports.jsxDEV("hr",{},void 0,!1,{fileName:i,lineNumber:50,columnNumber:7},globalThis),l.exports.jsxDEV(n.page.component,{components:te},void 0,!1,{fileName:i,lineNumber:51,columnNumber:7},globalThis),l.exports.jsxDEV("hr",{},void 0,!1,{fileName:i,lineNumber:52,columnNumber:7},globalThis),l.exports.jsxDEV("footer",{children:"EOF"},void 0,!1,{fileName:i,lineNumber:53,columnNumber:7},globalThis)]},void 0,!0);var S="/home/runner/work/tianwenh.github.io/tianwenh.github.io/theme/Pages.tsx";const F=n=>l.exports.jsxDEV(l.exports.Fragment,{children:n.pages.map(a=>l.exports.jsxDEV("article",{className:"card pages-card",children:l.exports.jsxDEV(V,{page:a},void 0,!1,{fileName:S,lineNumber:17,columnNumber:13},globalThis)},a.slug,!1,{fileName:S,lineNumber:16,columnNumber:11},globalThis))},void 0,!1);var h="/home/runner/work/tianwenh.github.io/tianwenh.github.io/theme/Tags.tsx";const le=n=>{const a=n&&J[n];return!a||a.length===0?l.exports.jsxDEV("div",{children:"No pages..."},void 0,!1,{fileName:h,lineNumber:10,columnNumber:12},globalThis):l.exports.jsxDEV(F,{pages:a},void 0,!1,{fileName:h,lineNumber:12,columnNumber:10},globalThis)},I=()=>{const{tagSlug:n}=C();return l.exports.jsxDEV(l.exports.Fragment,{children:[l.exports.jsxDEV("section",{className:"tags",children:W.map(a=>l.exports.jsxDEV(T,{tag:a,className:"card tag-card"},a,!1,{fileName:h,lineNumber:21,columnNumber:11},globalThis))},void 0,!1,{fileName:h,lineNumber:19,columnNumber:7},globalThis),l.exports.jsxDEV("hr",{},void 0,!1,{fileName:h,lineNumber:24,columnNumber:7},globalThis),le(n)]},void 0,!0)},ae=()=>l.exports.jsxDEV(l.exports.Fragment,{children:"404 Not Found..."},void 0,!1);var s="/home/runner/work/tianwenh.github.io/tianwenh.github.io/theme/App.tsx";function re(){return oe(),ie(),l.exports.jsxDEV(X,{children:l.exports.jsxDEV(c,{path:"/",element:l.exports.jsxDEV(K,{},void 0,!1,{fileName:s,lineNumber:22,columnNumber:32},this),children:[l.exports.jsxDEV(c,{index:!0,element:l.exports.jsxDEV(F,{pages:b},void 0,!1,{fileName:s,lineNumber:23,columnNumber:31},this)},void 0,!1,{fileName:s,lineNumber:23,columnNumber:9},this),l.exports.jsxDEV(c,{path:"/tags",element:l.exports.jsxDEV(I,{},void 0,!1,{fileName:s,lineNumber:24,columnNumber:38},this)},void 0,!1,{fileName:s,lineNumber:24,columnNumber:9},this),l.exports.jsxDEV(c,{path:"/tags/:tagSlug",element:l.exports.jsxDEV(I,{},void 0,!1,{fileName:s,lineNumber:25,columnNumber:47},this)},void 0,!1,{fileName:s,lineNumber:25,columnNumber:9},this),b.map(n=>l.exports.jsxDEV(c,{path:`/${n.slug}`,element:l.exports.jsxDEV(ne,{page:n},void 0,!1,{fileName:s,lineNumber:31,columnNumber:24},this)},n.slug,!1,{fileName:s,lineNumber:28,columnNumber:13},this)),l.exports.jsxDEV(c,{path:"*",element:l.exports.jsxDEV(ae,{},void 0,!1,{fileName:s,lineNumber:35,columnNumber:34},this)},void 0,!1,{fileName:s,lineNumber:35,columnNumber:9},this)]},void 0,!0,{fileName:s,lineNumber:22,columnNumber:7},this)},void 0,!1,{fileName:s,lineNumber:21,columnNumber:5},this)}function oe(){const{pathname:n}=w();d.exports.useEffect(()=>{window.scrollTo(0,0)},[n])}function ie(){const{hash:n}=w();d.exports.useEffect(()=>{const a=document.getElementById(n.slice(1));a==null||a.scrollIntoView({behavior:"smooth"})},[])}var E="/home/runner/work/tianwenh.github.io/tianwenh.github.io/theme/entry-client.tsx";U();const se=A.render;se(l.exports.jsxDEV(t.StrictMode,{children:l.exports.jsxDEV(B,{children:l.exports.jsxDEV(re,{},void 0,!1,{fileName:E,lineNumber:15,columnNumber:7},globalThis)},void 0,!1,{fileName:E,lineNumber:14,columnNumber:5},globalThis)},void 0,!1,{fileName:E,lineNumber:13,columnNumber:3},globalThis),document.getElementById("app"));
